Architecture du projet
======================

## Présentation générale

Nous voulons faire une simulation de ifttt. Pour cela, nous utilisons deux niveaux d'abstraction :

 1. Le niveau des modèles. Ce niveau est le plus abstrait et définit des catégories dont on donnera en quelque sorte des implémentations dans le niveau inférieur.
	* Un canal est une catégorie d'éléments de l'internet des objets : ce peut être une classe d'objets physiques ou immatériels comme un capteur, une lampe, le compte d'un service en ligne, un site de news. Comme dans ifttt, des canaux ont des signaux (triggers en anglais) et des actions.
	* Les signaux sont levés par le canal pour signaler un changement : ce peut-être un changement d'environnement (l'ouverture d'une porte, la détection d'un mouvement) ou un changement interne (un délai expire, une date échoit). Sémantiquemet, un signal mentionne généralement un objet et le nouvel état de ce dernier ou ce qui a provoqué ce changement d'état (par exemple : « la porte est ouverte » pour un capteur de porte ou « quelque chose à bougé » pour un détecteur de mouvement). Il peut mentionner des modalités (dans le cas d'une porte, on peut mentionner son degré d'ouverture).
	* Toujours de la même manière que ifttt, des recettes peuvent être créées pour matérialiser des réactions automatiques à un changement. La phrase « if this then that » montre bien que si un événement arrive, alors un canal va agir d'une certaine manière : une recette matérialise une relation de causalité entre deux acteurs. Outre son nom, son propriétaire et d'autres attributs, elle contient principalement quatre membres : un canal émetteur, un signal émis, un canal récepteur et une action : le canal émetteur lève un de ses signaux et à cause de cela, le canal récepteur accomplit l'action précisée dans la recette. Contrairement à certains de ses concurrents, une recette de ifttt ne peut lier plus d'un canal émetteur, un signal émis, un canal récepteur et une action : c'est atomique.
	* Sémantiquement, les actions contiennent un verbe, un objet et si besoin des modalités complémentaires. Le sujet de l'action est toujours le canal récepteur. Par exemple, une action simple est : « allume la lumière » et une action plus élaborée « allume la lampe en jaune, en mode économie d'énergie et à moyenne intensité ». Une recette lie de manière statique un unique élément pour chacun de ses quatre membres principaux : la sémantique est donc figée. En revanche, les modalités de l'action peuvent être définies en fonction de celles du signal émis.
 2. Le niveau des acteurs est en quelque sorte une représentation concrète du monde. Il contient des acteurs qui évoluent indépendamment et communiquent par message. La communication entre ces acteurs suit le formalisme indiqué plus haut.
 	* Le mode d'action d'un acteur est définit par un canal. Un acteur peut être vu comme une instance d'un canal.
 	* Les messages échangés par des acteurs ont la sémantique soit d'un signal, soit d'une action. De la même manière qu'une lettre à la Poste, ils peuvent être envoyés anonymement mais ont forcément un destinataire. Les acteurs ne communiquent que par message.
 	* A ce niveau concret, une recette est définie comme relation de causalité entre deux acteurs et « if this then that » devient : quand un acteur envoit un message qui contient un signal, alors un autre acteur reçoit un message qui lui dit d'accomplir telle action. Dans le monde physique, un capteur ne sait faire qu'une chose : lever des signaux. Pour respecter la simplicité des objets physiques, un pseudo-acteur est définit (Controller en anglais) pour permettrent aux acteurs de lever des signaux simplement en envoyant un message à ce pseudo-acteur. Les recettes sont « diluées » dans ce pseudo-acteur : à réception d'un message signal d'un acteur, le pseudo-acteur regarde si une relation de causalité existe. Le cas échéant, il envoit anonyment un message d'action à l'acteur définit.
 	* Ce pseudo-acteur représente ifttt mais ce n'est pas la seule architecture possible. On peut également rendre chaque acteur conscient des relations de causalité qui le lie aux autres (plus précisément : qui en lient d'autres aux messages signaux qu'il leur enverra). Cette architecture présente des avantages indéniables, puisqu'elle rend le système réellement distribué. Le projet est actuellement réparti en deux branches pour étudier la facilité d'implémentation de chacune.
 	* Ce pseudo-acteur est utile pour envoyer des messages signaux et simuler des changements. La période caractérisant l'envoi de ces messages est définit par une loi de probabilité qui peut être fixe (toutes les trente secondes) ou plus évoluée : lois de Bernouilli, Gauss, Poisson…
 	
## Présentation technique

Parler des classes et des manières « pratiques » de les utiliser.

